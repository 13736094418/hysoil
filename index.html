<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>温湿度监控平台 - OneNET数据</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🌡️ 温湿度实时监控平台</h1>
            <p>基于 OneNET 的物联网数据监控</p>
        </header>

        <section class="control-panel">
            <div class="card">
                <h2>🔧 设备控制</h2>
                <div class="form-group">
                    <label for="device-selector">选择设备:</label>
                    <select id="device-selector">
                        <option value="">请选择设备</option>
                        <!-- 设备选项将通过JavaScript动态添加 -->
                    </select>
                </div>
                <div class="button-group">
                    <button id="refresh-btn" class="btn btn-primary">🔄 刷新设备列表</button>
                    <button id="auto-refresh-btn" class="btn btn-secondary">⏱️ 开始自动刷新(10秒)</button>
                    <button id="stop-refresh-btn" class="btn btn-danger">⏹️ 停止自动刷新</button>
                </div>
                <div class="status-info">
                    <p>数据最后更新于: <span id="update-time">-</span></p>
                    <p>连接状态: <span id="connection-status">🔴 未连接</span></p>
                </div>
            </div>
        </section>

        <section class="data-display">
            <div class="metrics-grid">
                <div class="metric-card temperature">
                    <div class="metric-icon">🌡️</div>
                    <div class="metric-value" id="temperature-value">--</div>
                    <div class="metric-label">温度 (°C)</div>
                    <div class="metric-trend" id="temperature-trend">--</div>
                </div>
                
                <div class="metric-card humidity">
                    <div class="metric-icon">💧</div>
                    <div class="metric-value" id="humidity-value">--</div>
                    <div class="metric-label">湿度 (%)</div>
                    <div class="metric-trend" id="humidity-trend">--</div>
                </div>
            </div>
        </section>

        <section class="debug-info">
            <div class="card">
                <h2>🐛 调试信息</h2>
                <button id="debug-btn" class="btn btn-outline">诊断连接问题</button>
                <div id="debug-output" class="debug-output"></div>
            </div>
        </section>

        <section class="data-streams">
            <div class="card">
                <h2>📊 数据流信息</h2>
                <div class="streams-list" id="streams-list">
                    <p>暂无数据流信息</p>
                </div>
            </div>
        </section>

        <footer>
            <p>Powered by OneNET & Netlify | 最后更新: <span id="footer-time"></span></p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>