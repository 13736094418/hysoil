<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>温湿度监控平台 - OneNET数据</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🌡️ 温湿度实时监控平台</h1>
            <p>基于 OneNET 的物联网数据监控</p>
        </header>

        <!-- 控制面板 -->
        <section class="control-panel">
            <div class="card">
                <h2>🔧 设备控制</h2>
                <div class="form-group">
                    <label for="device-id-input">设备ID:</label>
                    <input type="text" id="device-id-input" placeholder="请输入设备ID">
                    <small>示例: 1234567890</small>
                </div>
                <div class="button-group">
                    <button id="fetch-data-btn" class="btn btn-primary">📡 获取数据</button>
                    <button id="auto-refresh-btn" class="btn btn-secondary">⏱️ 自动刷新(30秒)</button>
                    <button id="stop-refresh-btn" class="btn btn-danger" disabled>⏹️ 停止刷新</button>
                    <button id="test-connection-btn" class="btn btn-outline">🔍 测试连接</button>
                </div>
                <div class="status-info">
                    <p>数据最后更新: <span id="update-time">-</span></p>
                    <p>连接状态: <span id="connection-status">🔴 未连接</span></p>
                </div>
            </div>
        </section>

        <!-- 数据显示 -->
        <section class="data-display">
            <div class="metrics-grid">
                <div class="metric-card temperature">
                    <div class="metric-icon">🌡️</div>
                    <div class="metric-value" id="temperature-value">--</div>
                    <div class="metric-label">温度 (°C)</div>
                    <div class="metric-trend" id="temperature-trend">--</div>
                </div>
                
                <div class="metric-card humidity">
                    <div class="metric-icon">💧</div>
                    <div class="metric-value" id="humidity-value">--</div>
                    <div class="metric-label">湿度 (%)</div>
                    <div class="metric-trend" id="humidity-trend">--</div>
                </div>
            </div>
        </section>

        <!-- 调试信息 -->
        <section class="debug-info">
            <div class="card">
                <h2>🐛 调试面板</h2>
                <div class="debug-controls">
                    <button id="clear-log-btn" class="btn btn-small">🗑️ 清空日志</button>
                    <button id="export-log-btn" class="btn btn-small">📥 导出日志</button>
                </div>
                <div class="debug-output" id="debug-output">
                    <div class="log-entry">=== 系统启动 ===</div>
                    <div class="log-entry">等待用户操作...</div>
                </div>
            </div>
        </section>

        <!-- 数据流信息 -->
        <section class="data-streams">
            <div class="card">
                <h2>📊 数据流详情</h2>
                <div class="streams-container">
                    <div class="stream-item" id="temperature-stream">
                        <div class="stream-header">
                            <span class="stream-name">温度 (bat_tem)</span>
                            <span class="stream-status">--</span>
                        </div>
                        <div class="stream-data">
                            <div>最新值: <span class="stream-value">--</span></div>
                            <div>更新时间: <span class="stream-time">--</span></div>
                            <div>数据点数: <span class="stream-count">--</span></div>
                        </div>
                    </div>
                    
                    <div class="stream-item" id="humidity-stream">
                        <div class="stream-header">
                            <span class="stream-name">湿度 (Hum)</span>
                            <span class="stream-status">--</span>
                        </div>
                        <div class="stream-data">
                            <div>最新值: <span class="stream-value">--</span></div>
                            <div>更新时间: <span class="stream-time">--</span></div>
                            <div>数据点数: <span class="stream-count">--</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <footer>
            <p>Powered by OneNET & Netlify | 最后更新: <span id="footer-time"></span></p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>